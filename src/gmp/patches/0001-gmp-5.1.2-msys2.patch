From 64ed22c5bebb60c6a3d1864b0204cf645071e405 Mon Sep 17 00:00:00 2001
From: Hiroshi Shirosaki <h.shirosaki@gmail.com>
Date: Thu, 26 Jun 2014 14:16:06 +0900
Subject: [PATCH 1/2] gmp-5.1.2-msys2

https://github.com/Alexpux/MSYS2-packages/blob/master/gmp/gmp-5.1.2-msys2.patch
---
 configfsf.guess | 3 +++
 configure.ac    | 8 ++++----
 2 files changed, 7 insertions(+), 4 deletions(-)

diff --git a/configfsf.guess b/configfsf.guess
index 9afd676..336a1c3 100644
--- a/configfsf.guess
+++ b/configfsf.guess
@@ -866,6 +866,9 @@ EOF
     amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
 	echo x86_64-unknown-cygwin
 	exit ;;
+    amd64:MSYS*:*:* | x86_64:MSYS*:*:*)
+	echo x86_64-unknown-msys
+	exit ;;
     p*:CYGWIN*:*)
 	echo powerpcle-unknown-cygwin
 	exit ;;
diff --git a/configure.ac b/configure.ac
index 64b2c50..bc92914 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1807,7 +1807,7 @@ case $host in
 	    # Sun cc.
 	    cc_64_cflags="-xO3 -m64"
 	    ;;
-	  *-*-mingw* | *-*-cygwin)
+	  *-*-mingw* | *-*-cygwin | *-*-msys)
 	    limb_64=longlong
 	    CALLING_CONVENTIONS_OBJS_64=""
 	    AC_DEFINE(HOST_DOS64,1,[Define to 1 for Windos/64])
@@ -2462,7 +2462,7 @@ AC_LIBTOOL_WIN32_DLL
 
 AC_SUBST(LIBGMP_DLL,0)
 case $host in
-  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+  *-*-cygwin* | *-*-msys* | *-*-mingw* | *-*-pw32* | *-*-os2*)
     # By default, build only static.
     if test -z "$enable_shared"; then
       enable_shared=no
@@ -3574,7 +3574,7 @@ yes
 	  case $host in
 	    *-*-darwin*)
 	      GMP_INCLUDE_MPN(x86_64/darwin.m4) ;;
-	    *-*-mingw* | *-*-cygwin)
+	    *-*-mingw* | *-*-cygwin | *-*-msys)
 	      GMP_INCLUDE_MPN(x86_64/dos64.m4) ;;
 	    *-openbsd*)
 	      GMP_DEFINE_RAW(["define(<OPENBSD>,1)"]) ;;
@@ -3805,7 +3805,7 @@ AC_MSG_NOTICE([summary of build options:
 
 if test x$cross_compiling = xyes ; then
    case "$host" in
-     *-*-mingw* | *-*-cygwin)
+     *-*-mingw* | *-*-cygwin | *-*-msys)
      if test x$ABI = x64 ; then
 	AC_MSG_NOTICE([If wine64 is installed, use make check TESTS_ENVIRONMENT=wine64.])
      else
-- 
2.0.0

