From 428d5d92f4123cea35574bd129d722a4244224bd Mon Sep 17 00:00:00 2001
From: Hiroshi Shirosaki <h.shirosaki@gmail.com>
Date: Tue, 1 Jul 2014 00:40:25 +0900
Subject: [PATCH 01/41] gcc-4.8-filename-output

https://github.com/Alexpux/MSYS2-packages/blob/master/gcc/gcc-4.8-filename-output.patch
---
 gcc/c-family/c-opts.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/gcc/c-family/c-opts.c b/gcc/c-family/c-opts.c
index 5ee7024..1adb92b 100644
--- a/gcc/c-family/c-opts.c
+++ b/gcc/c-family/c-opts.c
@@ -1347,6 +1347,10 @@ c_finish_options (void)
 static void
 push_command_line_include (void)
 {
+  // This can happen if disabled by -imacros for example.
+  if (include_cursor > deferred_count)
+    return;
+
   if (!done_preinclude)
     {
       done_preinclude = true;
-- 
2.0.0.msysgit.0

